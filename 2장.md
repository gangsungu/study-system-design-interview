## 개략적인 규모 추정
개략적인 규모 추정은 보편적으로 통용되는 성능 수치상에서 사고 실험을 행하여  
추정치를 계산하는 행위로서 어떤 설계가 요구사항에 부합하는지 확인하는 행위

### 2의 제곱수
컴퓨터는 모든 것을 0과 1로 처리한다  
그래서 컴퓨터에게는 10진수보다 2의 제곱수가 더 자연스러운 단위

+ 1byte = 8bit (2^3)
+ 1KB = 1024bytes (2^10)
+ 1MB = 1024KB (2^20)
+ 1GB = 1024MB (2^30)

시스템 설계에서 왜 중요할까?  
+ 정확한 용량 계산
    - 시스템 설계나 실제 설계에서 1GB는 몇byte인가 
        + 잘못된 답 : 1,000,000,000 bytes (10억)
        + 정확한 답 : 1,073,741,824 bytes (2³⁰)
        + 차이는 7.4%인데, 대규모 시스템에서는 큰 차이가 됨
    - 계산의 편리함
        + DAU 1억명이 하루 평균 10개의 요청을 보낸다면?
        + 총 요청수는 10억
        + 초당 요청수는 2^30 / (24 * 3600)을 2^30 / 2^16으로 표현해서 초당 16,000개의 요청으로 계산 가능
    - 메모리와 스토리지 설계
        + 데이터베이스 샤딩이나 파티셔닝을 진행할 때도 2의 제곱수로 나누는 것이 효율적
            - userId & 16 
            - userId & 13 (나눗셈 연산 필요, 느림)

### 응답지연 값
```
L1 cache reference:              0.5 ns
L2 cache reference:              7 ns
Main memory reference:           100 ns
SSD random read:                 150,000 ns (150 μs)
Send 2K bytes over network:      20,000 ns (20 μs)
Read 1 MB from SSD:              1,000,000 ns (1 ms)
Disk seek:                       10,000,000 ns (10 ms)
```
> 구글의 Jeff Dean이 2010년에 발표한 수치

각종 레이턴시의 대략적인 기준값들이 존재하는데, 이걸로 괜찮은 성능인가? 판단할 수 있다  
사용자는 100ms 이하를 즉각적이라고 느끼고 1초 이상이면 느리다고 느낀다

+ 예시 1 : 뉴스피드 조회 API 설계
    - 목표 응답시간 : 200ms

        ```
        설계:
        1. 사용자 정보 조회 (Redis): 1ms
        2. 친구 목록 조회 (DB, 인덱스): 5ms
        3. 게시물 100개 조회 (DB): 50ms  ← 너무 느림!
        4. 이미지 URL 생성: 10ms
        5. 네트워크: 20ms
        -----------------
        총: 86ms (게시물 조회 최적화 전)
        ```
    - 게시물 미리 캐싱하여 최적화

### 가용성
가용성은 우리 시스템이 얼마나 안정적으로 운영되는가를 정량적으로 표현한 것

```
가용성(%) = (전체 시간 - 장애 시간) / 전체 시간 × 100

예: 1년 중 1시간 장애 발생
= (8760시간 - 1시간) / 8760시간 × 100
= 99.989%
```

SLA 등급과 허용 장애 시간, 9개 몇개냐로 등급을 나눈다

```
가용성     별칭              연간 다운타임    월간 다운타임    일간 다운타임
--------------------------------------------------------------------
90%       One nine         36.5일          72시간          2.4시간
99%       Two nines        3.65일          7.2시간         14.4분
99.9%     Three nines      8.76시간        43.2분          1.44분
99.99%    Four nines       52.6분          4.32분          8.64초
99.999%   Five nines       5.26분          25.9초          864ms
99.9999%  Six nines        31.5초          2.59초          86.4ms
```